<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.24.11"/><title data-react-helmet="true">Domain Layers and Subclassing an API in PHP</title><meta data-react-helmet="true" name="google-site-verification" content="lgj2wHWCc-tmk2PhmZuUiH33VhML9SNcPBG5UqBY9BY"/><style id="jss-server-side">.MuiSvgIcon-root{fill:currentColor;width:1em;height:1em;display:inline-block;font-size:2.4642857142857144rem;transition:fill .2s cubic-bezier(.4,0,.2,1) 0s;flex-shrink:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.MuiSvgIcon-colorPrimary{color:#3f51b5}.MuiSvgIcon-colorSecondary{color:#f50057}.MuiSvgIcon-colorAction{color:rgba(0,0,0,.54)}.MuiSvgIcon-colorError{color:#f44336}.MuiSvgIcon-colorDisabled{color:rgba(0,0,0,.26)}.MuiSvgIcon-fontSizeInherit{font-size:inherit}.MuiSvgIcon-fontSizeSmall{font-size:2.0535714285714284rem}.MuiSvgIcon-fontSizeLarge{font-size:3.59375rem}.MuiPaper-root{color:rgba(0,0,0,.87);transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0s;background-color:#fff}.MuiPaper-rounded{border-radius:4px}.MuiPaper-outlined{border:1px solid rgba(0,0,0,.12)}.MuiPaper-elevation0{box-shadow:none}.MuiPaper-elevation1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.MuiPaper-elevation2{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.MuiPaper-elevation3{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.MuiPaper-elevation4{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.MuiPaper-elevation5{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.MuiPaper-elevation6{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.MuiPaper-elevation7{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.MuiPaper-elevation8{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.MuiPaper-elevation9{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.MuiPaper-elevation10{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.MuiPaper-elevation11{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.MuiPaper-elevation12{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.MuiPaper-elevation13{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.MuiPaper-elevation14{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.MuiPaper-elevation15{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.MuiPaper-elevation16{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.MuiPaper-elevation17{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.MuiPaper-elevation18{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.MuiPaper-elevation19{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.MuiPaper-elevation20{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.MuiPaper-elevation21{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.MuiPaper-elevation22{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.MuiPaper-elevation23{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.MuiPaper-elevation24{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.MuiButtonBase-root{color:inherit;border:0;cursor:pointer;margin:0;display:inline-flex;outline:0;padding:0;position:relative;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:0;vertical-align:middle;-moz-appearance:none;justify-content:center;text-decoration:none;background-color:transparent;-webkit-appearance:none;-webkit-tap-highlight-color:transparent}.MuiButtonBase-root::-moz-focus-inner{border-style:none}.MuiButtonBase-root.Mui-disabled{cursor:default;pointer-events:none}@media print{.MuiButtonBase-root{-webkit-print-color-adjust:exact;color-adjust:exact}}.MuiIconButton-root{flex:0 0 auto;color:rgba(0,0,0,.54);padding:12px;overflow:visible;font-size:2.4642857142857144rem;text-align:center;transition:background-color 150ms cubic-bezier(.4,0,.2,1) 0s;border-radius:50%}.MuiIconButton-root:hover{background-color:rgba(0,0,0,.04)}.MuiIconButton-root.Mui-disabled{color:rgba(0,0,0,.26);background-color:transparent}@media (hover:none){.MuiIconButton-root:hover{background-color:transparent}}.MuiIconButton-edgeStart{margin-left:-12px}.MuiIconButton-sizeSmall.MuiIconButton-edgeStart{margin-left:-3px}.MuiIconButton-edgeEnd{margin-right:-12px}.MuiIconButton-sizeSmall.MuiIconButton-edgeEnd{margin-right:-3px}.MuiIconButton-colorInherit{color:inherit}.MuiIconButton-colorPrimary{color:#3f51b5}.MuiIconButton-colorPrimary:hover{background-color:rgba(63,81,181,.04)}@media (hover:none){.MuiIconButton-colorPrimary:hover{background-color:transparent}}.MuiIconButton-colorSecondary{color:#f50057}.MuiIconButton-colorSecondary:hover{background-color:rgba(245,0,87,.04)}@media (hover:none){.MuiIconButton-colorSecondary:hover{background-color:transparent}}.MuiIconButton-sizeSmall{padding:3px;font-size:1.8482142857142856rem}.MuiIconButton-label{width:100%;display:flex;align-items:inherit;justify-content:inherit}.MuiAppBar-root{width:100%;border:none;display:flex;z-index:1100;box-shadow:none;box-sizing:border-box;flex-shrink:0;flex-direction:column}.MuiAppBar-positionFixed{top:0;left:auto;right:0;position:fixed}@media print{.MuiAppBar-positionFixed{position:absolute}}.MuiAppBar-positionAbsolute{top:0;left:auto;right:0;position:absolute}.MuiAppBar-positionSticky{top:0;left:auto;right:0;position:-webkit-sticky;position:sticky}.MuiAppBar-positionStatic{position:static}.MuiAppBar-positionRelative{position:relative}.MuiAppBar-colorDefault{color:rgba(0,0,0,.87);background-color:#f5f5f5}.MuiAppBar-colorPrimary{color:#fff;border:none;background-color:rgba(0,0,0,0)}.MuiAppBar-colorSecondary{color:#fff;background-color:#f50057}.MuiAppBar-colorInherit{color:inherit}.MuiAppBar-colorTransparent{color:inherit;background-color:transparent}.MuiTypography-root{margin:0}.MuiTypography-body2{margin:1.5em;padding:1em;font-size:14px;font-family:PT Mono;font-weight:400;line-height:1.43;background-color:rgba(0,0,0,.05)}.MuiTypography-body1{font-size:1.6428571428571428rem;font-family:'Baloo 2';font-weight:400;line-height:1.5}.MuiTypography-caption{font-size:1.2321428571428572rem;font-family:'Baloo 2';font-weight:400;line-height:1.66}.MuiTypography-button{font-size:1.4375rem;font-family:'Baloo 2';font-weight:500;line-height:1.75;text-transform:uppercase}.MuiTypography-h1{margin:0;padding:0;font-size:57px;font-family:Lato;font-weight:300;line-height:1.167}.MuiTypography-h2{margin:0;padding:0;font-size:39px;font-family:Lato;font-weight:300;line-height:1.2}.MuiTypography-h3{margin:0;padding:0;font-size:25px;font-family:Lato;font-weight:400;line-height:1.167}.MuiTypography-h4{font-size:3.4910714285714284rem;font-family:'Baloo 2';font-weight:400;line-height:1.235}.MuiTypography-h5{font-size:2.4642857142857144rem;font-family:'Baloo 2';font-weight:400;line-height:1.334}.MuiTypography-h6{font-size:2.0535714285714284rem;font-family:'Baloo 2';font-weight:500;line-height:1.6}.MuiTypography-subtitle1{font-size:1.6428571428571428rem;font-family:'Baloo 2';font-weight:400;line-height:1.75}.MuiTypography-subtitle2{font-size:1.4375rem;font-family:'Baloo 2';font-weight:500;line-height:1.57}.MuiTypography-overline{font-size:1.2321428571428572rem;font-family:'Baloo 2';font-weight:400;line-height:2.66;text-transform:uppercase}.MuiTypography-srOnly{width:1px;height:1px;overflow:hidden;position:absolute}.MuiTypography-alignLeft{text-align:left}.MuiTypography-alignCenter{text-align:center}.MuiTypography-alignRight{text-align:right}.MuiTypography-alignJustify{text-align:justify}.MuiTypography-noWrap{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.MuiTypography-gutterBottom{margin-bottom:.35em}.MuiTypography-paragraph{margin-bottom:16px}.MuiTypography-colorInherit{color:inherit}.MuiTypography-colorPrimary{color:#3f51b5}.MuiTypography-colorSecondary{color:#f50057}.MuiTypography-colorTextPrimary{color:rgba(0,0,0,.87)}.MuiTypography-colorTextSecondary{color:rgba(0,0,0,.54)}.MuiTypography-colorError{color:#f44336}.MuiTypography-displayInline{display:inline}.MuiTypography-displayBlock{display:block}html{box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*,::after,::before{box-sizing:inherit}b,strong{font-weight:700}body{color:#444;margin:0;font-size:1.4375rem;overflow-x:hidden;font-family:'Baloo 2';font-weight:400;line-height:1.43;background-color:#fafafa}@media print{body{background-color:#fff}}body::-webkit-backdrop{background-color:#fafafa}body::backdrop{background-color:#fafafa}h1{margin:0;padding:0;font-size:60px;font-family:Lato}h2{margin:0;padding:0;font-size:39px;font-family:Lato}h3{margin:0;padding:0;font-size:25px;font-family:Lato}pre{margin:1.5em;padding:1em;overflow:scroll;font-size:14px;font-family:PT Mono;background-color:rgba(0,0,0,.05)}a{color:#003ca5;text-decoration:none}a:hover{text-decoration:underline}blockquote{color:#555;margin:1em;padding-top:.1em;padding-left:.5em;padding-right:.5em;padding-bottom:.1em;background-color:#eedc82}hr{border:solid #888 1px}.language-text{color:#bf6f6f;font-size:83%;font-family:PT Mono}span.token.comment{color:#888}span.token.class-name{color:#4682b4}span.token.function{color:#4682b4}span.token.keyword{color:#b56727}span.token.string{color:#76abdf}span.token.number{color:#76abdf}.MuiGrid-container{width:100%;display:flex;flex-wrap:wrap;box-sizing:border-box}.MuiGrid-item{margin:0;box-sizing:border-box}.MuiGrid-zeroMinWidth{min-width:0}.MuiGrid-direction-xs-column{flex-direction:column}.MuiGrid-direction-xs-column-reverse{flex-direction:column-reverse}.MuiGrid-direction-xs-row-reverse{flex-direction:row-reverse}.MuiGrid-wrap-xs-nowrap{flex-wrap:nowrap}.MuiGrid-wrap-xs-wrap-reverse{flex-wrap:wrap-reverse}.MuiGrid-align-items-xs-center{align-items:center}.MuiGrid-align-items-xs-flex-start{align-items:flex-start}.MuiGrid-align-items-xs-flex-end{align-items:flex-end}.MuiGrid-align-items-xs-baseline{align-items:baseline}.MuiGrid-align-content-xs-center{align-content:center}.MuiGrid-align-content-xs-flex-start{align-content:flex-start}.MuiGrid-align-content-xs-flex-end{align-content:flex-end}.MuiGrid-align-content-xs-space-between{align-content:space-between}.MuiGrid-align-content-xs-space-around{align-content:space-around}.MuiGrid-justify-xs-center{justify-content:center}.MuiGrid-justify-xs-flex-end{justify-content:flex-end}.MuiGrid-justify-xs-space-between{justify-content:space-between}.MuiGrid-justify-xs-space-around{justify-content:space-around}.MuiGrid-justify-xs-space-evenly{justify-content:space-evenly}.MuiGrid-spacing-xs-1{width:calc(100% + 8px);margin:-4px}.MuiGrid-spacing-xs-1>.MuiGrid-item{padding:4px}.MuiGrid-spacing-xs-2{width:calc(100% + 16px);margin:-8px}.MuiGrid-spacing-xs-2>.MuiGrid-item{padding:8px}.MuiGrid-spacing-xs-3{width:calc(100% + 24px);margin:-12px}.MuiGrid-spacing-xs-3>.MuiGrid-item{padding:12px}.MuiGrid-spacing-xs-4{width:calc(100% + 32px);margin:-16px}.MuiGrid-spacing-xs-4>.MuiGrid-item{padding:16px}.MuiGrid-spacing-xs-5{width:calc(100% + 40px);margin:-20px}.MuiGrid-spacing-xs-5>.MuiGrid-item{padding:20px}.MuiGrid-spacing-xs-6{width:calc(100% + 48px);margin:-24px}.MuiGrid-spacing-xs-6>.MuiGrid-item{padding:24px}.MuiGrid-spacing-xs-7{width:calc(100% + 56px);margin:-28px}.MuiGrid-spacing-xs-7>.MuiGrid-item{padding:28px}.MuiGrid-spacing-xs-8{width:calc(100% + 64px);margin:-32px}.MuiGrid-spacing-xs-8>.MuiGrid-item{padding:32px}.MuiGrid-spacing-xs-9{width:calc(100% + 72px);margin:-36px}.MuiGrid-spacing-xs-9>.MuiGrid-item{padding:36px}.MuiGrid-spacing-xs-10{width:calc(100% + 80px);margin:-40px}.MuiGrid-spacing-xs-10>.MuiGrid-item{padding:40px}.MuiGrid-grid-xs-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xs-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xs-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xs-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xs-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xs-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xs-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xs-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xs-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xs-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xs-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xs-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xs-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xs-12{flex-grow:0;max-width:100%;flex-basis:100%}@media (min-width:600px){.MuiGrid-grid-sm-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-sm-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-sm-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-sm-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-sm-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-sm-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-sm-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-sm-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-sm-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-sm-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-sm-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-sm-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-sm-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-sm-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:960px){.MuiGrid-grid-md-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-md-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-md-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-md-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-md-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-md-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-md-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-md-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-md-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-md-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-md-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-md-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-md-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-md-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1280px){.MuiGrid-grid-lg-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-lg-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-lg-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-lg-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-lg-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-lg-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-lg-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-lg-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-lg-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-lg-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-lg-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-lg-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-lg-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-lg-12{flex-grow:0;max-width:100%;flex-basis:100%}}@media (min-width:1920px){.MuiGrid-grid-xl-auto{flex-grow:0;max-width:none;flex-basis:auto}.MuiGrid-grid-xl-true{flex-grow:1;max-width:100%;flex-basis:0}.MuiGrid-grid-xl-1{flex-grow:0;max-width:8.333333%;flex-basis:8.333333%}.MuiGrid-grid-xl-2{flex-grow:0;max-width:16.666667%;flex-basis:16.666667%}.MuiGrid-grid-xl-3{flex-grow:0;max-width:25%;flex-basis:25%}.MuiGrid-grid-xl-4{flex-grow:0;max-width:33.333333%;flex-basis:33.333333%}.MuiGrid-grid-xl-5{flex-grow:0;max-width:41.666667%;flex-basis:41.666667%}.MuiGrid-grid-xl-6{flex-grow:0;max-width:50%;flex-basis:50%}.MuiGrid-grid-xl-7{flex-grow:0;max-width:58.333333%;flex-basis:58.333333%}.MuiGrid-grid-xl-8{flex-grow:0;max-width:66.666667%;flex-basis:66.666667%}.MuiGrid-grid-xl-9{flex-grow:0;max-width:75%;flex-basis:75%}.MuiGrid-grid-xl-10{flex-grow:0;max-width:83.333333%;flex-basis:83.333333%}.MuiGrid-grid-xl-11{flex-grow:0;max-width:91.666667%;flex-basis:91.666667%}.MuiGrid-grid-xl-12{flex-grow:0;max-width:100%;flex-basis:100%}}.MuiTooltip-popper{z-index:1500;pointer-events:none}.MuiTooltip-popperInteractive{pointer-events:auto}.MuiTooltip-popperArrow[x-placement*=bottom] .MuiTooltip-arrow{top:0;left:0;margin-top:-.71em;margin-left:4px;margin-right:4px}.MuiTooltip-popperArrow[x-placement*=top] .MuiTooltip-arrow{left:0;bottom:0;margin-left:4px;margin-right:4px;margin-bottom:-.71em}.MuiTooltip-popperArrow[x-placement*=right] .MuiTooltip-arrow{left:0;width:.71em;height:1em;margin-top:4px;margin-left:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow[x-placement*=left] .MuiTooltip-arrow{right:0;width:.71em;height:1em;margin-top:4px;margin-right:-.71em;margin-bottom:4px}.MuiTooltip-popperArrow[x-placement*=left] .MuiTooltip-arrow::before{transform-origin:0 0}.MuiTooltip-popperArrow[x-placement*=right] .MuiTooltip-arrow::before{transform-origin:100% 100%}.MuiTooltip-popperArrow[x-placement*=top] .MuiTooltip-arrow::before{transform-origin:100% 0}.MuiTooltip-popperArrow[x-placement*=bottom] .MuiTooltip-arrow::before{transform-origin:0 100%}.MuiTooltip-tooltip{color:#fff;padding:4px 8px;font-size:1.0267857142857142rem;max-width:300px;word-wrap:break-word;font-family:'Baloo 2';font-weight:500;line-height:1.4em;border-radius:4px;background-color:rgba(97,97,97,.9)}.MuiTooltip-tooltipArrow{margin:0;position:relative}.MuiTooltip-arrow{color:rgba(97,97,97,.9);width:1em;height:.71em;overflow:hidden;position:absolute;box-sizing:border-box}.MuiTooltip-arrow::before{width:100%;height:100%;margin:auto;content:"";display:block;transform:rotate(45deg);background-color:currentColor}.MuiTooltip-touch{padding:8px 16px;font-size:1.4375rem;font-weight:400;line-height:1.14286em}.MuiTooltip-tooltipPlacementLeft{margin:0 24px;transform-origin:right center}@media (min-width:600px){.MuiTooltip-tooltipPlacementLeft{margin:0 14px}}.MuiTooltip-tooltipPlacementRight{margin:0 24px;transform-origin:left center}@media (min-width:600px){.MuiTooltip-tooltipPlacementRight{margin:0 14px}}.MuiTooltip-tooltipPlacementTop{margin:24px 0;transform-origin:center bottom}@media (min-width:600px){.MuiTooltip-tooltipPlacementTop{margin:14px 0}}.MuiTooltip-tooltipPlacementBottom{margin:24px 0;transform-origin:center top}@media (min-width:600px){.MuiTooltip-tooltipPlacementBottom{margin:14px 0}}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-ac4bd14397eb64db1baf.js"/><link as="script" rel="preload" href="/framework-a576ae5ab153fa4a7c27.js"/><link as="script" rel="preload" href="/app-afc659828a4757d881dc.js"/><link as="script" rel="preload" href="/29107295-8c77d6e7d13656cd7f0e.js"/><link as="script" rel="preload" href="/commons-bcea6f4c3a34911a5856.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-3c0d8ed09fcbedfafe8f.js"/><link as="fetch" rel="preload" href="/page-data/domain-layers-and-subclassing-an-api-in-php/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/static/d/3220165301.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="MuiGrid-root MuiGrid-container MuiGrid-justify-xs-flex-end" style="background-color:#dbdbdb;margin-bottom:3vw;padding-bottom:1vw"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-grid-xs-9" style="margin-right:3vw"><div class="MuiGrid-root MuiGrid-container MuiGrid-item"><div class="MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-1 MuiGrid-item MuiGrid-direction-xs-column MuiGrid-grid-xs-12"><div class="MuiGrid-root MuiGrid-container MuiGrid-item" style="margin-bottom:38vh"><header class="MuiPaper-root MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary mui-fixed MuiPaper-elevation4"><div style="visibility:visible"><button class="MuiButtonBase-root MuiIconButton-root" tabindex="0" type="button"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path></svg></span></button></div></header></div><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-align-content-xs-flex-end MuiGrid-justify-xs-flex-end"><h1 class="MuiTypography-root MuiTypography-h1 MuiTypography-alignRight MuiTypography-displayBlock" style="visibility:hidden">My Blog</h1></div><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-align-content-xs-flex-end MuiGrid-justify-xs-flex-end"><h2 class="MuiTypography-root MuiTypography-h2 MuiTypography-alignRight MuiTypography-displayBlock">Domain Layers and Subclassing an API in PHP</h2></div><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-align-content-xs-flex-end MuiGrid-justify-xs-flex-end" style="visibility:visible"><h3 class="MuiTypography-root MuiTypography-h3 MuiTypography-alignRight MuiTypography-displayBlock">Thursday, October 16th 2014</h3></div></div></div></div></div><div class="MuiGrid-root MuiGrid-container MuiGrid-justify-xs-flex-end"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-grid-xs-9" style="margin-bottom:3vw;margin-right:3vw"><div class="MuiGrid-root MuiGrid-container MuiGrid-item"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-direction-xs-row-reverse"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-grid-xs-true"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-direction-xs-column"><div style="width:100%">A friend of mine who I occasionally help with development tasks came to me the other day asking about starting a project which would involve leveraging an API.<br />
<br />
Given that I develop APIs and domain architecture, this seemed like a pretty good fit for my talents. &nbsp;I can produce the business logic and a simple chrome extension that talks to it and then we can explore further opportunities later, knowing that everything has been nicely abstracted.<br />
<br />
I've coded against a few public APIs in my time for various things ranging from social media to push messaging. &nbsp;Although each time, I'm always left feeling like what I did was never a first-class citizen in my project. &nbsp;In many cases with APIs, you're only leveraging the external model, but in the case of my new project, I actually plan on "extending" it...<br />
<br />
Read on if you're interested in any of the techniques involved, including repositories and project structure.<br />
<h2>
Extension Defined</h2>
<div>
When working with an external set of data, you have at least two choices. &nbsp;You can either harvest data from it and blend it into your own schema, or you can decide that the external representation of data is in fact part of your internal domain.</div>
<div>
Because my entire solution targets the external platform, it made more sense to me to codify that in my abstraction. &nbsp;This is so that I always remain compatible and more aware of changes on their end &nbsp;-&nbsp;<span style="font-size: x-small;">which I <i><b>am</b></i>&nbsp;in fact responsible for adapting to!.</span></div>
<div>
<br /></div>
<div>
This is also good when you don't necessarily want or need to take a local copy of the external data, but only maintain what you're adding to the schema. &nbsp;Keep in mind, there is a sliding scale here which my design can address. &nbsp;You don't want to be performing API requests for every small anonymous operation if that's your use case, consider caching in those scenarios.</div>
<div>
<br /></div>
<div>
If however, your project is mostly background work, there might be a justification for not storing the data, let alone letting it get stale. &nbsp;Again, it's a sliding scale which is an exercize left to the reader <span style="font-size: x-small;">(for now)</span>.</div>
<h2>
Familiar Constructs</h2>
As I've been exploring non-<a href="http://goo.gl/wqrQsH" target="_blank">leaky</a> project architectures, a natural solution <span style="font-size: x-small;"><i>(that I don't take full credit for)</i></span>&nbsp;that occured to me is to wrap the external API in a domain layer. &nbsp;Very similar to what you might make as a package to then depend on in your framework project, this is a repository layer that that instead of talking to MySQL, Postgres or MongoDB, talks to HTTP!<br />
<br />
This package consists of models, repositories and if necessitated in any way, could probably even contain domain services. &nbsp;Although I'd say 99% of the time, most API access is so simple, a domain service would not be necessary. &nbsp;Agian though, it's not completely ruled out, so if there's additional behaviour involved with accessing your remote API, the option is there.<br />
<br />
<br />
<div style="text-align: center;">
<table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody>
<tr><td style="text-align: center;"><a href="http://goo.gl/0uJLbT" style="margin-left: auto; margin-right: auto;" target="_blank"><img border="0" src="http://1.bp.blogspot.com/-uOdhJqegzpc/VEAA9_u2OeI/AAAAAAAAVKw/w-IU9f5SIX4/s1600/Domain%2BLibrary%2BStructure.png" height="480" width="640" /></a></td></tr>
<tr><td class="tr-caption" style="text-align: center;"><span style="font-size: small; text-align: start;">Here's how things might break down in your project and libraries' structures.</span></td></tr>
</tbody></table>
<span id="goog_740734792"></span></div>
<h3>
<ul>
<li>Project</li>
</ul>
</h3>
<ul><ul>
<li>Uses services found in your <b style="text-decoration: underline;">domain library</b>&nbsp;in controllers, filters, middleware, commands, etc...</li>
<li>Depends on specific storage like MySQL, Postgres or MongoDB as a package</li>
<li>Depends on your domain library as a package</li>
<li>Contains repositories that interact with your storage and the api</li>
<ul>
<li>Implements domain library repository interfaces</li>
<li>Composes the repository layer from your <u><b>api/external domain library</b></u></li>
</ul>
</ul>
</ul>
<h3>
<ul>
<li>Domain Library</li>
</ul>
</h3>
<ul><ul>
<li>Depends on your <u><b>api/external domain library</b></u> as a package</li>
<li>Defines repository interfaces that extend api domain library interfaces</li>
<ul>
<li>Does not implement them!</li>
</ul>
<li>Provides domain services that perform business logic using <u>domain library</u> interfaces</li>
<ul>
<li>Instances of classes implementing domain library interfaces typically originate from the project <span style="font-size: x-small;"><i>(and usually with the help of a DI setup)</i></span></li>
</ul>
<li>Defines models that extend api/external domain library models</li>
</ul>
</ul>
<h3>
<ul>
<li>API/External Library</li>
</ul>
</h3>
<ul><ul>
<li>Defines a repository interface</li>
<li>Implements the repository interface</li>
<li>Defines models</li>
</ul>
</ul>
As you can see, this is just the repository pattern, with some advice on how to structure your subclassing and composition to preserve functionality!<br />
<ul>
</ul>
<h2>
Thinking it Through</h2>
<div>
In my situation, what I ended up doing was creating a <a href="https://github.com/atrauzzi/toggl-sdk/blob/master/src/Repository/Api/Base.php" target="_blank">base repository class</a>&nbsp;in my api/external library that abstracts away the minutae of calling the API I'm wrapping. &nbsp;I made it able to return raw, array or domain objects from the API, in effect making it behave like a very primitive object-api-manager.</div>
<div>
<br /></div>
<div>
There will usually be specifics when it comes to implementing these kinds of things that will depend on what you're accessing. &nbsp;But the nice part is that there is now somewhere to hide these abstractions from the layers that only wish to consume business objects. &nbsp;In my case, when it's time to update how the API is accessed, or add support for a new endpoint or feature, anyone reading my code knows exactly where to go!</div>
<div>
<br /></div>
<div>
Some advice I like to offer when people are serious about their domain design:</div>
<div>
<ul>
<li>Don't use ORMs or libraries that require you to subclass a base model type</li>
<li>Stay away from active-record-like systems which conflate repository and model</li>
<li>Refrain from putting methods in your models that require access to global or injected infrastructure - those methods belong in a service</li>
<li>Store data as attributes/properties on your model so that tools can reflect on them</li>
</ul>
<div>
Moving outwards from the external/api repositories, you reach actual project domain. &nbsp;This layer extends the external/api repositories and models to remain signature compatible while also adding it's own specifics. &nbsp;</div>
<div>
The new interfaces will later be implemented from within the more concrete project where persistance and other niceties are established. &nbsp;That means there are no interface implementations in the domain library, but instead domain service implementations. &nbsp;This is another composable layer where you work with your models and is where you really see things pay off. &nbsp;It can seem a little tricky here, but if you refer to the diagram above, it's simply that your project is going to implement what your domain services depend on, that's all.</div>
<div>
<br /></div>
<div>
Finally, you have your project. &nbsp;Which after all these efforts should be implementing your final repository interfaces as mentioned above and making use of the models and services they facilitate. &nbsp;Which, if that's the case, congratulations! &nbsp;Ideally you'll also have a dependency injection container to weave it all together. &nbsp;Depending on what tools you're using that may require some configuration.</div>
<div>
<br /></div>
<div>
Don't worry, it's still possible to maintain idiomatic syntax while following these guidelines. &nbsp;Especially if you use an ORM like doctrine which is able to hydrate relations transparently, just pick best-of-breed tools that keep your concerns in mind.</div>
</div>
<h2>
Why?</h2>
<div>
I probably use this heading a little too often, but it's a good question to be continuously asking.</div>
<div>
<br /></div>
<div>
After all the toil of extracting this separation, you might be curious as to what it nets you. &nbsp;Well, if you review my examples thus far, you might have noticed that I use the word "package" a fair bit. &nbsp;For every level of separation here (3 in total), you actually have a clean break between layers of code. &nbsp;<span style="font-size: x-small;"><i>(In my situation, they are self-contained composer packages that can neatly track issues and changes without getting confused with irrelevant details.)</i></span></div>
<div>
<br /></div>
<div>
In the first package, you have your base project which will be where the rubber meets the road. &nbsp;Once you decide upon a framework, you should also have an idea of how you will be persisting your data and what the entry points for your functionality are. &nbsp;All those dependencies are maintained at the project level.</div>
<div>
<br /></div>
<div>
In the second and third packages, you have what defines your domain <u>as it is known without the framework</u>.</div>
<div>
That's an uncommon consideration these days, as people are encouraged to put this code in their base projects in the name of rapid development. &nbsp;And it isn't necessarily wrong from that point of view. &nbsp;But the tendency has been that it ends up introducing unnecssary coupling to things like requests, sessions and error feedback. &nbsp;Over time, maintainability will suffer and you'll end up with the usual big ugly codebase nobody likes to work on or make sense of.</div>
<div>
<br /></div>
<div>
By maintaining separate domain packages, you guarantee yourself the ability to transition to new frameworks as they come along (<a href="http://en.wikipedia.org/wiki/You_aren't_gonna_need_it" target="_blank">YAGNI</a> alert!) and more importantly - a clean separation between business logic and request handling. &nbsp;If you enjoy any modest level of success, you will also observe some benefits when it comes to managing scope and how hard your code is on your databases (scalability!).</div>
<div>
<br /></div>
<div>
As always, it's your responsibility as the project architect to look into your crystal ball and know what the future might be like. &nbsp;If your project is going to be more than a prototype, it's in your best interest to consider these changes early as you get started or transition from a proof of concept.</div>
<h2>
Conclusion</h2>
<div>
So, I hope you've enjoyed this quick little tour of how you can produce a domain layer that accesses an API. &nbsp;I encourage you to look at my new <a href="https://github.com/atrauzzi/toggl-sdk" target="_blank">toggl sdk</a> which employs the first part of these designs. &nbsp;Everything I've written here and the diagram above is more than enough to infer how to complete the rest if you're interested in trying it out.</div>
<div>
<br /></div>
<div>
What I've written here is not exclusive to PHP. &nbsp;I think after adapting to whatever constructs are available in each environment, these guidelines can be applied to many different languages.</div>
<div>
<br /></div>
<div>
If you're interested in knowing my specific stack, right now I'm keeping up with Laravel 5 <span style="font-size: x-small;"><i>(which is super alpha at the moment)</i></span>, and using my <a href="https://github.com/atrauzzi/laravel-mongodb" target="_blank">laravel-mongodb package</a> for persistence. &nbsp;The rest of my project is private code, but I've shared as much as I can here with you and on github! :)</div>
</div></div></div><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-grid-xs-2"><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-direction-xs-column"></div></div></div></div></div><div class="MuiGrid-root MuiGrid-container MuiGrid-item MuiGrid-justify-xs-flex-end" style="margin-bottom:1em;margin-right:0.5em"><p class="MuiTypography-root MuiTypography-body1" style="font-size:0.7em;font-style:italic;cursor:pointer;margin-right:auto;margin-left:0.5em">0.46.0</p><p class="MuiTypography-root MuiTypography-body1" style="font-size:0.7em;font-style:italic;cursor:pointer" title="Barenaked Ladies - Gordon - Box Set">You say you wanna know everything about me?  Well here you go...</p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-ZLMRLLLJZL"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-ZLMRLLLJZL', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/domain-layers-and-subclassing-an-api-in-php";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2a86e29ae53b0bcd324d.js"],"app":["/app-afc659828a4757d881dc.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-d85e1a2fc8a4c7e7e6d1.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-3c0d8ed09fcbedfafe8f.js"]};/*]]>*/</script><script src="/polyfill-2a86e29ae53b0bcd324d.js" nomodule=""></script><script src="/component---src-templates-post-tsx-3c0d8ed09fcbedfafe8f.js" async=""></script><script src="/commons-bcea6f4c3a34911a5856.js" async=""></script><script src="/29107295-8c77d6e7d13656cd7f0e.js" async=""></script><script src="/app-afc659828a4757d881dc.js" async=""></script><script src="/framework-a576ae5ab153fa4a7c27.js" async=""></script><script src="/webpack-runtime-ac4bd14397eb64db1baf.js" async=""></script></body></html>